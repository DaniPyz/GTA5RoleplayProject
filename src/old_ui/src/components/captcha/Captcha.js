import './captcha.scss'

import React from 'react'
import parse from 'html-react-parser';
import ragemp from '../../_modules/ragemp'

function Captcha() {
  const [toggle, setToggle] = React.useState({
    status: false,

    svg: `<svg xmlns="http://www.w3.org/2000/svg" width="180" height="64" viewBox="0,0,180,64"><path d="M5 48 C100 34,92 19,166 55" stroke="#e47bca" fill="none" /><path d="M17 39 C78 25,94 11,161 50" stroke="#45d745" fill="none" /><path fill="#a7ef8f" d="M41.32 36.43L41.40 36.50L41.28 36.39Q39.47 36.57 38.16 38.00L38.05 37.89L38.00 37.84Q36.78 39.35 36.62 41.39L36.70 41.48L36.61 41.38Q36.39 43.65 37.70 44.73L37.69 44.73L37.71 44.75Q38.99 45.80 41.27 45.72L41.34 45.79L41.38 45.83Q43.79 45.59 44.81 44.57L44.88 44.64L44.81 44.57Q45.98 43.09 45.86 41.13L45.85 41.12L45.78 41.05Q45.65 39.04 44.49 37.76L44.44 37.71L44.51 37.78Q43.33 36.48 41.37 36.48ZM41.42 26.46L41.42 26.45L41.43 26.46Q39.80 26.22 38.38 26.75L38.33 26.70L38.38 26.75Q37.08 27.70 37.32 29.70L37.35 29.73L37.32 29.69Q37.88 33.72 41.47 33.72L41.42 33.67L41.40 33.65Q43.09 33.88 44.16 32.65L44.14 32.64L44.15 32.65Q45.25 31.47 45.29 29.79L45.13 29.64L45.12 29.62Q45.35 27.89 44.58 27.24L44.44 27.11L44.59 27.26Q42.75 26.31 41.36 26.39ZM40.96 48.30L41.00 48.34L37.80 48.41L37.85 48.46Q36.07 48.31 34.64 47.37L34.64 47.37L34.75 47.47Q33.27 46.24 33.43 43.18L33.37 43.12L33.36 43.11Q33.93 35.85 37.81 34.79L37.80 34.79L37.86 34.84Q35.41 33.86 33.98 28.11L33.96 28.09L33.88 28.01Q33.61 26.60 33.69 25.74L33.57 25.62L33.70 25.75Q34.04 23.48 38.00 23.44L37.83 23.27L37.96 23.40Q42.36 23.19 43.91 23.39L43.96 23.45L44.06 23.54Q48.02 23.96 48.51 26.12L48.51 26.12L48.67 26.28Q48.80 26.94 48.80 27.35L48.73 27.28L48.71 27.26Q48.73 28.01 48.53 28.67L48.42 28.56L48.45 28.59Q47.96 33.28 44.82 34.91L44.82 34.91L44.63 34.72Q48.43 35.62 48.96 41.29L49.07 41.41L48.98 41.31Q48.93 41.42 48.97 42.81L49.05 42.89L49.09 42.93Q49.05 45.75 47.34 46.89L47.49 47.04L47.35 46.91Q45.96 47.92 41.07 48.41ZM43.53 50.92L43.44 50.82L47.03 50.91L47.11 50.99Q48.99 51.12 50.62 50.34L50.60 50.32L50.65 50.36Q51.80 49.52 51.88 47.52L51.93 47.57L51.83 47.47Q51.83 46.25 51.43 44.17L51.41 44.15L51.40 44.15Q50.52 39.26 48.28 37.26L48.27 37.26L48.08 36.86L47.81 36.51L47.77 36.35L47.66 36.24Q49.43 34.79 50.41 30.35L50.52 30.45L50.53 30.46Q50.35 29.87 50.43 28.98L50.48 29.02L50.46 29.00Q50.60 28.33 50.52 27.68L50.46 27.62L50.54 27.70Q50.43 26.21 49.17 25.68L49.05 25.56L49.11 25.58L48.86 25.41L48.97 25.51Q48.64 24.70 47.38 23.84L47.47 23.93L47.45 23.88L47.48 23.90Q45.24 23.05 40.87 22.85L41.00 22.98L40.94 22.91Q39.21 22.73 37.74 22.85L37.80 22.92L37.89 23.00Q36.85 22.86 35.47 23.03L35.59 23.15L35.49 23.05Q33.38 23.43 33.14 25.19L33.14 25.19L33.14 25.19Q33.19 25.81 33.23 26.67L33.17 26.60L33.26 26.70Q33.33 27.21 33.94 29.74L33.99 29.79L33.93 29.73Q34.85 33.26 36.73 34.69L36.78 34.75L36.76 34.72L36.68 34.65Q33.74 36.06 33.17 41.61L33.24 41.68L33.27 41.72Q33.04 44.06 33.04 45.04L33.06 45.05L32.94 44.93Q33.13 46.96 34.40 47.94L34.37 47.91L34.40 47.95Q34.42 47.93 34.71 48.13L34.74 48.16L34.79 48.21Q35.96 50.73 43.59 50.97ZM43.13 39.02L43.23 39.11L43.14 39.02Q44.11 38.93 45.05 39.42L45.06 39.44L45.10 39.47Q45.42 40.45 45.38 41.02L45.50 41.14L45.38 41.02Q45.39 41.31 45.39 41.64L45.46 41.70L45.52 41.77Q45.55 44.32 43.10 45.22L42.95 45.07L43.07 45.19Q42.23 45.53 41.37 45.41L41.28 45.32L41.24 45.28Q40.07 45.41 38.84 44.92L38.92 45.00L38.86 44.94Q38.63 44.30 38.71 43.24L38.68 43.21L38.73 43.26Q38.82 41.47 40.11 40.17L40.08 40.14L40.16 40.22Q41.32 38.80 43.04 38.92ZM43.44 28.92L43.33 28.81L43.48 28.96Q44.21 28.71 44.78 28.88L44.88 28.97L44.80 29.75L44.87 29.82Q44.84 31.30 43.86 32.38L43.84 32.36L43.83 32.35Q42.83 33.41 41.36 33.20L41.40 33.24L41.29 33.14Q40.31 33.22 39.87 32.97L39.91 33.01L39.96 33.07Q39.89 32.75 39.77 32.02L39.61 31.87L39.73 31.98Q39.37 30.40 40.67 29.50L40.76 29.58L40.70 29.53Q41.97 28.92 43.48 28.96Z" /><path fill="#d494e9" d="M87.38 47.45L87.39 47.46L87.45 47.52Q86.69 47.45 85.96 47.49L85.92 47.46L85.91 47.45Q85.17 47.57 84.44 47.57L84.38 47.51L84.55 47.67Q85.03 44.00 85.03 40.33L85.01 40.30L85.02 40.31Q82.92 40.22 81.94 40.22L82.01 40.28L81.95 40.23Q80.99 40.16 79.03 40.08L79.15 40.20L79.08 40.12Q79.09 39.81 78.89 37.16L79.00 37.28L79.03 37.30Q81.71 37.83 84.89 37.83L84.94 37.87L84.88 37.82Q84.59 33.07 84.14 30.30L84.13 30.29L84.17 30.33Q85.01 30.44 85.87 30.44L85.80 30.37L87.59 30.41L87.59 30.41Q87.48 35.11 87.48 37.89L87.38 37.78L87.39 37.79Q89.63 37.71 93.06 37.34L93.20 37.48L93.07 37.35Q93.05 38.89 93.05 40.19L92.98 40.12L93.07 40.21Q92.78 40.21 91.93 40.25L91.79 40.11L91.88 40.20Q90.87 40.25 90.21 40.29L90.08 40.16L90.18 40.25Q90.24 40.32 87.39 40.32L87.37 40.30L87.40 44.00L87.32 43.93Q87.34 45.70 87.47 47.54ZM93.65 36.96L93.60 36.91L93.67 36.97Q91.57 37.24 89.57 37.32L89.51 37.26L89.57 37.32Q89.80 33.92 90.25 31.93L90.30 31.97L90.21 31.88Q89.48 31.97 87.98 32.14L87.95 32.11L88.12 29.87L88.25 30.01Q85.29 29.86 83.50 29.74L83.55 29.79L83.65 29.90Q84.26 33.24 84.47 37.40L84.52 37.45L84.36 37.29Q82.50 37.27 78.54 36.62L78.49 36.56L78.55 36.62Q78.86 37.91 78.86 40.73L78.79 40.65L80.39 40.62L80.55 40.78Q80.48 41.48 80.31 42.99L80.24 42.93L84.62 42.77L84.46 42.61Q84.28 46.06 83.95 48.02L84.03 48.10L84.06 48.12Q84.77 48.03 86.28 47.90L86.34 47.96L86.36 47.98Q86.36 48.71 86.32 50.14L86.17 49.99L86.29 50.12Q86.89 50.14 90.76 50.30L90.73 50.27L90.78 50.32Q89.68 46.89 89.43 42.65L89.45 42.66L89.46 42.68Q92.99 42.74 95.23 43.15L95.30 43.21L95.26 43.18Q95.04 42.14 95.04 41.12L95.03 41.11L94.98 39.02L95.11 39.15Q94.75 39.03 94.18 39.08L94.20 39.10L93.43 39.19L93.34 39.10Q93.47 38.37 93.59 36.90Z" /><path fill="#e958c4" d="M138.81 45.78L138.85 45.81L138.77 45.73Q139.29 46.99 139.86 49.15L139.77 49.06L139.73 49.02Q135.25 47.64 130.31 47.92L130.38 47.99L130.36 47.97Q125.39 48.18 121.11 50.30L121.20 50.39L121.14 50.34Q121.33 49.55 121.38 49.63L121.31 49.56L121.41 49.66Q125.35 45.36 129.55 40.63L129.58 40.67L129.65 40.74Q134.33 35.34 135.59 30.32L135.55 30.28L135.54 30.27Q136.12 28.48 134.76 27.22L134.74 27.20L134.77 27.24Q133.45 26.01 131.53 26.18L131.45 26.10L131.39 26.03Q131.04 26.02 130.68 26.02L130.77 26.11L130.75 26.09Q129.03 26.00 127.68 26.98L127.70 26.99L127.73 27.03Q126.44 28.59 126.68 31.44L126.64 31.40L126.61 31.37Q124.70 31.01 123.40 30.52L123.31 30.44L123.33 30.46Q123.11 28.93 123.03 27.38L123.10 27.46L123.07 27.42Q123.06 25.75 123.72 24.52L123.67 24.47L123.74 24.54Q125.63 23.05 129.22 23.05L129.23 23.06L130.93 22.89L130.99 22.94Q133.41 22.96 134.43 23.08L134.45 23.10L134.55 23.20Q139.07 23.52 139.35 26.13L139.36 26.13L139.45 26.22Q139.58 26.89 139.50 27.74L139.50 27.74L139.35 27.59Q139.47 28.45 139.31 29.18L139.31 29.18L139.29 29.16Q137.49 37.81 129.38 45.15L129.39 45.16L129.43 45.20Q130.89 44.99 132.36 44.99L132.38 45.01L132.26 44.89Q135.85 45.02 138.91 45.87ZM138.25 23.52L138.21 23.48L138.35 23.61Q136.55 22.83 134.71 22.75L134.67 22.71L130.95 22.46L131.09 22.60Q126.24 22.23 123.87 23.41L123.99 23.53L123.89 23.43Q122.78 24.93 122.78 27.13L122.77 27.13L122.82 27.17Q122.78 27.86 123.10 30.88L123.05 30.83L123.13 30.91Q123.65 31.10 124.91 31.43L124.89 31.40L124.99 32.61L125.00 32.62Q124.95 33.09 125.03 33.67L124.95 33.58L124.91 33.55Q126.33 33.74 128.98 33.98L129.02 34.03L129.00 34.00Q129.02 33.66 129.02 33.29L128.85 33.13L129.00 33.27Q128.90 31.21 130.20 29.77L130.32 29.88L130.35 29.91Q131.55 28.36 133.47 28.48L133.54 28.55L133.52 28.53Q134.27 28.51 135.09 28.68L135.16 28.75L135.03 28.61Q135.25 29.12 135.33 29.57L135.26 29.50L135.24 29.48Q135.40 30.04 135.32 30.41L135.26 30.36L135.29 30.39Q133.95 35.49 129.22 40.67L129.27 40.72L129.25 40.70Q126.94 43.08 121.10 49.56L121.01 49.47L121.05 49.51Q120.80 50.36 120.43 50.97L120.53 51.07L120.54 51.08Q122.31 50.19 123.94 49.62L123.95 49.64L123.78 49.46Q123.13 50.21 122.11 51.80L122.01 51.70L122.05 51.74Q121.94 52.11 121.82 52.48L121.91 52.57L121.90 52.57Q127.00 50.24 132.87 50.44L132.92 50.49L132.83 50.40Q138.99 50.64 143.88 53.17L143.89 53.17L142.75 50.82L142.83 50.90Q142.20 49.53 141.91 48.67L141.80 48.56L141.89 48.65Q141.07 48.15 139.76 47.71L139.68 47.63L139.73 47.68Q139.55 46.88 139.14 45.41L139.10 45.37L139.28 45.55Q136.73 44.76 134.29 44.55L134.32 44.59L134.37 44.64Q139.30 39.66 140.94 30.81L140.98 30.85L141.30 27.87L141.31 27.88Q141.09 25.82 139.78 25.09L139.80 25.11L139.72 25.06L139.86 25.21Q139.78 25.08 139.69 25.08L139.72 25.11L139.73 25.12Q139.44 24.17 138.25 23.52Z" /></svg>`

   
  })
  const [answerCaptcha, setAnswerCaptcha] = React.useState('')
  
  
  React.useMemo(() => {
    ragemp.eventCreate('client::captcha', (cmd, data) => {
      switch (cmd) {
        case 'toggle':
          {
            setAnswerCaptcha('')
            setToggle(data)
            
            break
          }
       
      }
    })
  }, [])
 
  const valueChange = (e) => {
    setAnswerCaptcha(e.target.value)
    ragemp.send('ui::captchaValue', { value: e.target.value })
  }
  return (
    <div className='captcha' style={toggle.status === false ? { display: 'none' } : {}}>
      <div className="captcha-wrapper">
        <h1>Проверка</h1>
        <div>
          {parse(toggle.svg)}
        </div>
        <input value={answerCaptcha} onChange={valueChange} type="number"  placeholder='Ответ'/>
      </div>
    </div>
  )
}

export default Captcha